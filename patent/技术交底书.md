# 技术交底书（初稿）

## 1. 交底主题
面向单机多智能体协作的语义记忆碎片聚类压缩与偏好保留系统。

## 2. 技术问题
1. 多智能体输出持续增长，导致上下文膨胀。
2. 简单聚类摘要易丢失关键事实与参数。
3. 冲突信息常被强行融合，缺乏分叉保留。
4. 偏好配置难以执行与审计。

## 3. 技术手段
1. 记忆碎片事件化与元数据标注。
2. 两阶段候选检索与精判并簇。
3. 跨智能体冗余仲裁与信用分配。
4. 冲突检测与分叉摘要输出。
5. Retention Contract 结构化偏好执行。
6. 保真校验与失败重写机制。
7. 全局 token 预算优化分配。
8. 分层索引与证据追溯。

## 4. 关键创新点
1. 偏好契约可执行化：将偏好从自然语言升级为结构化硬约束。
2. 证明式保真：摘要输出必须通过证据一致性与覆盖率校验。
3. 跨簇预算优化：在总预算约束下优化摘要长度分配。
4. 跨智能体冗余仲裁：引入信用分配记录采纳路径。

## 5. 技术效果
1. 在固定预算下提高关键信息保留能力。
2. 降低冲突信息误融合率。
3. 输出可审计链路，支持复盘和合规审查。

## 6. 与现有技术区别
与仅关注“聚类+摘要”的方案不同，本方案同时约束：
1. 槽位化保留；
2. 保真校验与重写；
3. 预算优化；
4. 冗余仲裁。

## 7. 实施条件
1. 单机环境即可部署；
2. 数据存储可采用文件或嵌入式数据库；
3. 算法模块可替换，不依赖单一模型供应商。

## 8. 交底附带材料
1. `spec/architecture.md`
2. `spec/data_model.md`
3. `spec/algorithm_pseudocode.md`
4. `spec/retention_contract.schema.json`
5. `prototype/memory_pipeline.py`
6. `prototype/run_experiments.py`

# 权利要求书（资源调度方向，v1）

- Timestamp: 2026-02-11 13:03:10 +08:00
- 说明: 本版本按当前代码实现起草，用于工程评审与代理人二次收敛

## 一、方法类权利要求

1. 一种面向计算设备的动态资源调度方法，其特征在于，由处理器执行并至少包括：  
   1) 周期采集 CPU、内存、交换分区及 GPU 资源快照；  
   2) 对所述资源快照执行双视图模式判定，其中紧急判定使用原始快照，稳态判定使用平滑快照；  
   3) 当处于非紧急模式时，对待执行任务执行准入判定，所述准入判定在同一调度周期内采用累计投影预算；  
   4) 当处于紧急模式时，阻断新任务准入，并按低优先级可抢占任务执行资源回收；  
   5) 在 GPU 资源准入中，针对声明目标 GPU 编号的任务按目标卡进行显存投影，并对未声明目标卡任务采用保守投影；  
   6) 在紧急回收中识别紧急瓶颈资源维度，基于任务资源归一化回收评分执行定向抢占，直至达到回收目标。

2. 根据权利要求1所述的方法，其特征在于，所述双视图模式判定至少包括：  
   - 对紧急模式使用原始快照中的内存占用比例、交换分区占用比例、可用内存和 GPU 显存占用比例进行判定；  
   - 对高压模式使用平滑快照进行判定；  
   - 退出高压模式时使用迟滞阈值；  
   - 紧急模式退出后保留冷却周期。

3. 根据权利要求1所述的方法，其特征在于，所述平滑快照采用指数移动平均方式计算，平滑系数 `ema_alpha` 属于 `[0,1]`。

4. 根据权利要求1所述的方法，其特征在于，所述同一调度周期累计投影预算包括：  
   - 内存累计预算；  
   - CPU 累计预算；  
   - GPU 按卡累计预算与未绑定任务预算。  
   每当一个任务在当前周期被准入后，下一候选任务的判定基线即时更新。

5. 根据权利要求1所述的方法，其特征在于，所述 GPU 准入判定在任务声明目标 GPU 编号时，仅以目标 GPU 卡实时显存与该卡累计预算进行投影；当任务未声明目标 GPU 编号时，将按卡累计预算全部纳入保守投影。

6. 根据权利要求1所述的方法，其特征在于，所述紧急回收进一步包括：  
   - 基于 GPU 卡显存比例识别热点 GPU；  
   - 对抢占候选任务按优先级、资源回收评分和启动时间排序；  
   - 其中资源回收评分至少包含内存回收贡献与 GPU 回收贡献的归一化组合。

7. 根据权利要求6所述的方法，其特征在于，所述 GPU 回收贡献采用亲和性权重：目标卡一致任务权重高于未绑定任务，未绑定任务权重高于跨卡绑定任务。

8. 根据权利要求6所述的方法，其特征在于，所述紧急回收同时满足以下停止条件才停止抢占：  
   - 内存回收量达到内存回落目标；  
   - GPU 回收量达到显存回落目标。

9. 根据权利要求1所述的方法，其特征在于，所述方法对终止失败任务保留超时逃逸机制：当终止请求超过阈值时间仍未成功时，执行强制移除并记录事件。

10. 根据权利要求1所述的方法，其特征在于，所述方法对阻断事件记录至少包含任务标识、阻断原因和阻断来源，并区分阻断事件计数与唯一任务阻断计数。

## 二、系统类权利要求

11. 一种动态资源调度系统，其特征在于，包括：  
   - 资源监控模块，用于采集 CPU、内存、交换分区和 GPU 资源数据；  
   - 模式判定模块，用于执行双视图判定、迟滞判定和冷却控制；  
   - 准入控制模块，用于执行同周期累计投影准入；  
   - 抢占回收模块，用于在紧急模式下执行瓶颈资源定向抢占；  
   - 任务执行模块，用于启动、跟踪、终止和回收任务；  
   - 审计日志模块，用于输出调度决策事件。

12. 根据权利要求11所述的系统，其特征在于，所述准入控制模块支持任务级 GPU 亲和字段，并维护按卡预算和未绑定预算。

13. 根据权利要求11所述的系统，其特征在于，所述抢占回收模块依据热点 GPU 与亲和性权重计算回收评分，并执行双目标回收停止策略。

## 三、存储介质类权利要求

14. 一种计算机可读存储介质，其上存储有计算机程序，所述程序被处理器执行时实现权利要求1至10任一项所述的方法。

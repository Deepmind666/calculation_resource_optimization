# 说明书（CNIPA格式化稿，R43）

## 一、发明名称

一种多资源动态调度方法、系统、介质及设备。

## 二、技术领域

本发明涉及计算机资源调度技术领域，尤其涉及一种针对处理器、内存及图形处理器资源的动态准入与回收控制方法、系统、介质及设备。

## 三、背景技术

现有任务调度方案通常在单一资源维度执行控制策略，难以同时处理内存压力和图形处理器显存压力的耦合风险。  
在高并发任务提交场景中，若仅按单任务静态视角判断准入，容易出现“单个任务均可准入但同周期累计后越线”的问题。  
在紧急回收场景中，常见方案多采用单维评分或固定优先级回收，难以兼顾多资源瓶颈的联合缓解效率。  
因此，需要一种可在非紧急阶段抑制超发、在紧急阶段快速回收且具备可审计追溯能力的多资源动态调度方案。

## 四、发明内容

### （一）发明目的

本发明的目的在于提供一种多资源动态调度方法、系统、介质及设备，以解决现有技术中同周期超发风险高、紧急回收效率低以及多资源联动能力不足的问题。

### （二）技术方案

为实现上述目的，本发明采用如下技术方案：  
在方法层面，通过周期采集资源状态构建原始资源快照，并基于原始资源快照与平滑资源快照执行双视图模式判定；在非紧急模式下执行同周期累计资源投影准入；在紧急模式下执行阻断、瓶颈识别、热点图形处理器识别、归一化回收评分排序及双目标停止控制。  
在系统层面，至少包括资源监控模块、模式判定模块、准入控制模块、定向抢占模块、任务执行模块及事件审计模块，形成闭环数据流。  
在介质层面，提供计算机可读存储介质，其程序被执行时实现上述方法步骤。  
优选地，本发明进一步包括图形处理器亲和加权机制、协同增强项、终止失败保护机制及自适应参数调优机制。

### （三）有益效果

与现有技术相比，本发明至少具有以下有益效果：  
1. 通过双视图模式判定实现紧急响应与稳态抗抖动兼顾；  
2. 通过同周期累计投影降低批量任务准入超发概率；  
3. 通过按卡分桶预算与未绑定保守预算提升图形处理器场景的准入准确性；  
4. 通过归一化回收评分与双目标停止条件提升紧急回收效率与稳定性；  
5. 通过审计事件链路提高过程可追溯性。

## 五、附图说明

图1为本发明实施例中多资源动态调度系统模块结构示意图。  
图2为本发明实施例中单个调度周期流程示意图。  
图3为本发明实施例中三种调度模式真机对比示意图。  
图4为本发明实施例中自适应调优轨迹示意图。

## 六、具体实施方式

以下结合附图和实施例对本发明作进一步说明，但本发明并不限于以下实施例。  

实施例一：  
系统周期采集处理器资源、内存资源和图形处理器资源，形成原始资源快照（210）；并依据平滑处理结果形成平滑资源快照（220）。模式判定模块（120）在紧急路径中仅使用原始资源快照（210）进行阈值判定，在稳态路径中使用平滑资源快照（220）并结合迟滞及冷却规则进行模式维持或回落。  

实施例二：  
在非紧急模式下，准入控制模块（130）对待执行任务队列（300）按顺序执行同周期累计投影判定。对于绑定图形处理器任务（310），仅对目标图形处理器预算分桶投影；对于未绑定图形处理器任务（320），按保守策略计入各图形处理器预算风险。每次任务准入后，后续候选任务共享更新后的投影基线。  

实施例三：  
在紧急模式下，定向抢占模块（140）识别瓶颈资源维度和热点图形处理器（510），并计算归一化资源回收评分（400），其中至少包括内存回收贡献项（410）和图形处理器回收贡献项（420）；当内存和图形处理器双紧急同时存在时，启用协同增强项（430）。系统按任务优先级、评分及亲和加权排序执行回收，当双目标停止条件（520）满足时停止本轮抢占。  

实施例四：  
事件审计模块（160）记录模式切换、任务阻断、任务启动、任务停止和回收目标达成事件，形成可追溯事件序列。参数调优模块（170）可根据运行统计信号调整后续窗口参数。  

本领域技术人员应理解，在不脱离本发明核心思想的前提下，还可作出多种替换和变形，均应落入本发明保护范围。

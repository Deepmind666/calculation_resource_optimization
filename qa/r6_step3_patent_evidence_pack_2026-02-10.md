# R6 Step3 Patent Evidence Pack (P-02 / P-03)

- Timestamp: 2026-02-10 15:23:42 +08:00
- Executor: Codex (GPT-5)
- Scope: reproducible evidence package for resource-scheduler core points `P-02` and `P-03`.
- Notes: engineering evidence only, not legal advice.

## Deliverables
- Experiment script: `prototype/run_patent_evidence.py`
- Evidence outputs:
  - `figures/patent_evidence_metrics.json`
  - `figures/patent_evidence_metrics.csv`
- Evidence tests: `prototype/tests/test_patent_evidence.py`
- Technique-claim mapping: `qa/technique_claim_mapping_2026-02-10.md`

## Repro Commands
```powershell
python prototype/run_patent_evidence.py
python -m unittest discover -s prototype/tests -p "test_*.py"
python qa/validate_scheduler_config.py spec/scheduler_config.example.json
powershell -ExecutionPolicy Bypass -File qa/structure_check.ps1
```

## Result Summary

### P-02 Ablation: Dual-View vs EMA-Only
Scenario: same raw burst sequence with spike over emergency threshold.

| Variant | Raw Emergency First Tick | First Emergency Tick | Response Delay | Emergency Ticks |
|---|---:|---:|---:|---:|
| dual_view_raw_plus_ema | 3 | 3 | 0 | 6 |
| ema_only_alpha_0_3_no_raw_bypass | 3 | 6 | 3 | 3 |

Interpretation:
- Dual-view mode (`raw for emergency + EMA for steady-state`) reacts immediately to spike.
- EMA-only baseline (`alpha=0.3`, no raw bypass) delays emergency entry by 3 ticks.

### P-03 Ablation: Cumulative vs No-Cumulative Projection
Scenario: one tick with concurrent submissions (`memory=78%`, 4 tasks, each 800MB).

| Variant | Admitted | Blocked | Projected Peak Memory | Limit | Breach |
|---|---:|---:|---:|---:|---|
| with_cumulative_projection | 2 | 2 | 90.8906% | 92.0% | No |
| without_cumulative_projection_baseline | 4 | 0 | 100.6562% | 92.0% | Yes |

Derived indicator:
- `over_issued_tasks_without_cumulative = 2`
- `over_issue_rate_without_cumulative = 0.5`

Interpretation:
- Without cumulative projection, same-tick independent admission over-issues tasks by 50%.
- Cumulative projection keeps projected memory below emergency threshold.

## Code-to-Claim Mapping
- Main mapping file: `qa/technique_claim_mapping_2026-02-10.md`
- This report keeps only evidence summary and reproducibility; detailed line-by-line mapping is split out for review focus.

## Review Checklist
- [x] Evidence script is deterministic and runnable in local workspace.
- [x] Output files are generated by command run, not hand-written.
- [x] P-02 follows requested baseline: EMA-only (`alpha=0.3`) without raw bypass.
- [x] P-03 follows requested baseline: no-cumulative projection in scheduler path.
- [x] Added quantitative metrics: response delay and over-issue rate.
- [x] Dedicated tests added for evidence behavior.
- [x] Full unit tests passed (28/28).
- [x] Config validation passed.
- [x] Structure check passed.

## Residual Risks
- P-03 baseline is an ablation scheduler variant for comparison; not a production branch recommendation.
- Workload is synthetic and single-host; stronger patent argument still needs mixed real-process stress evidence.
